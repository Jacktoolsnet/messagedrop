#!/usr/bin/env bash
set -euo pipefail

if [[ "${SKIP_GITLEAKS:-}" == "1" ]]; then
  exit 0
fi

if ! command -v gitleaks >/dev/null 2>&1; then
  echo "gitleaks not found. Install it or set SKIP_GITLEAKS=1 to bypass." >&2
  exit 1
fi

gitleaks protect --staged --redact --no-banner
