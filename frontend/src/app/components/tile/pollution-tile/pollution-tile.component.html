<div class="pollution-tile" role="button" tabindex="0" (click)="edit()"
  (keyup.enter)="edit()" (keyup.space)="edit()">
  <div class="pollution-header">
    <div class="pollution-icon">
      <mat-icon>{{ icon }}</mat-icon>
    </div>
    <div class="pollution-title">{{ title }}</div>
    @if (isStale) {
      <span class="stale">{{ 'common.tiles.pollution.stale' | transloco }}</span>
    }
  </div>

  @if (!airQuality || metrics.length === 0) {
    <div class="empty">{{ 'common.tiles.pollution.empty' | transloco }}</div>
  } @else {
    <div class="pollution-grid">
      @for (m of metrics; track m.key) {
        <div
          class="metric"
          [class.warn]="m.level === 'warn'"
          [class.alert]="m.level === 'alert'"
          [style.borderColor]="m.color"
          [style.backgroundColor]="m.color + '22'">
          <div class="metric-text">
            <div class="label">{{ m.label }}</div>
            <div class="value" [style.color]="m.color">{{ m.value }}</div>
          </div>
          <button
            mat-icon-button
            class="metric-action"
            color="primary"
            type="button"
            (click)="openAirQualityDetails(m.key); $event.stopPropagation()"
            [attr.aria-label]="'common.tiles.pollution.openDetailsAria' | transloco">
            <mat-icon>{{ m.icon }}</mat-icon>
          </button>
        </div>
      }
    </div>
  }
</div>
