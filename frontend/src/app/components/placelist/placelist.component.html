<mat-dialog-content class="dialog">

    <div *ngIf="!hasPlaces()" class="no-content">
        <button mat-mini-fab color="accent" class="button_back" (click)="goBack()">
            <mat-icon>arrow_back</mat-icon>
        </button>
        <button class="first-button" mat-flat-button color="primary" [attr.aria-hidden]="false" (click)="addPlace()">
            <span>Add my first place</span>
        </button>
    </div>

    <div *ngIf="hasPlaces()" class="content">
        <button mat-mini-fab color="accent" class="button_back" (click)="goBack()">
            <mat-icon>arrow_back</mat-icon>
        </button>
        <button *ngIf="hasPlaces()" [attr.aria-hidden]="false" class="button_add" mat-mini-fab color="primary"
            aria-label="Add" (click)="addPlace()">
            <mat-icon [attr.aria-hidden]="false" class="material-symbols-outlined">add</mat-icon>
        </button>

        <mat-card class="item" *ngFor="let place of placesSignal(); index as i">
            <div class="avatar-box" (click)="editPlace(place)">
                <mat-icon *ngIf="place.icon && !place.base64Avatar">{{ place.icon || 'location' }}</mat-icon>
                <img *ngIf="place.base64Avatar" class="avatar" [src]="place.base64Avatar" />
                <span *ngIf="place.name" class="name">{{ place.name }}</span>
            </div>
            <mat-card-content>
                <div class="tile-grid">
                    <app-datetime-tile [timezone]="place.timezone"></app-datetime-tile>
                    <app-weather-tile [place]="place"></app-weather-tile>
                    <app-air-quality-tile [place]="place"></app-air-quality-tile>
                    <app-note-tile [place]="place"></app-note-tile>
                </div>
            </mat-card-content>
            <mat-card-actions class="buttonbar">
                <button mat-mini-fab color="secondary" aria-label="Edit place" (click)="editPlace(place)">
                    <mat-icon class="material-symbols-outlined">edit</mat-icon>
                </button>
                <button mat-mini-fab color="secondary" aria-label="Delete place" (click)="deletePlace(place)">
                    <mat-icon class="material-symbols-outlined">delete_forever</mat-icon>
                </button>
                <button mat-mini-fab [color]="!place.subscribed ? 'secondary' : 'primary'" aria-label="Subscribe"
                    (click)="subscribe(place)" *ngIf="!subscriptionError">
                    <mat-icon class="material-symbols-outlined">bookmark_flag</mat-icon>
                </button>
                <button mat-mini-fab color="secondary" aria-label="Fly to place" (click)="flyTo(place)">
                    <mat-icon class="material-symbols-outlined">place</mat-icon>
                </button>
            </mat-card-actions>
        </mat-card>
    </div>
</mat-dialog-content>