<app-dialog-header
  icon="swap_vert"
  [title]="'common.placeList.sortTitle' | transloco">
</app-dialog-header>

<mat-dialog-content class="sort-dialog-content">
  <div cdkDropList class="sort-list" (cdkDropListDropped)="drop($event)">
    @for (place of places(); track place.id) {
    <div class="sort-row" cdkDrag>
      <button type="button" class="drag-handle" cdkDragHandle
        [attr.aria-label]="'common.placeList.reorderAria' | transloco:{ name: getPlaceName(place) }">
        <mat-icon>drag_indicator</mat-icon>
      </button>
      <span class="avatar">
        @if (place.base64Avatar) {
        <img class="avatar__img" [src]="place.base64Avatar"
          [attr.alt]="getPlaceName(place)" />
        } @else {
        <mat-icon>{{ getPlaceIcon(place) }}</mat-icon>
        }
      </span>
      <span class="name">{{ getPlaceName(place) }}</span>
      <button mat-icon-button color="primary" class="settings-button" type="button"
        [attr.aria-label]="'common.placeList.editAria' | transloco"
        (click)="openPlaceSettings(place)">
        <mat-icon>settings</mat-icon>
      </button>
    </div>
    }
  </div>
</mat-dialog-content>

<mat-dialog-actions class="sticky-actions" align="end">
  <button mat-icon-button class="action-close" (click)="close()"
    [attr.aria-label]="'common.actions.close' | transloco">
    <mat-icon>close</mat-icon>
  </button>
  <button mat-icon-button type="button" (click)="help.open('myPlaceSort')"
    [attr.aria-label]="'common.actions.help' | transloco">
    <mat-icon>help</mat-icon>
  </button>
  <button mat-icon-button color="primary" (click)="apply()"
    [attr.aria-label]="'common.actions.apply' | transloco">
    <mat-icon>check</mat-icon>
  </button>
</mat-dialog-actions>
