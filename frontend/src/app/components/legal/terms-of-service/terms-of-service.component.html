<h1 mat-dialog-title>Terms of Service</h1>

<mat-dialog-content class="content">
    @if (loading()) {
    <mat-progress-bar mode="indeterminate"></mat-progress-bar>
    <p class="muted">Loading terms of serviceâ€¦</p>
    }

    @if (error()) {
    <div class="error" role="alert">
        <p>Could not load the terms of service file.</p>
        <button mat-stroked-button (click)="reload()">Retry</button>
    </div>
    }

    @if (!loading() && !error()) {
    <pre class="terms-text" [textContent]="text()" aria-label="Terms of service"></pre>
    }
</mat-dialog-content>

<mat-dialog-actions class="consent" align="start">
    <mat-slide-toggle [checked]="accepted" [disabled]="loading() || error()" (change)="onToggle($event.checked)"
        aria-label="Accept Terms of Service">
        I have read and accept this Terms of Service.
    </mat-slide-toggle>
</mat-dialog-actions>

<mat-dialog-actions class="actions" align="end">
    <button mat-button (click)="openInNewTab()" [disabled]="loading() || error()">Open in new tab</button>
    <button mat-button (click)="download()" [disabled]="loading() || error()">Download</button>
    <button mat-button color="primary" (click)="close()">Close</button>
</mat-dialog-actions>
