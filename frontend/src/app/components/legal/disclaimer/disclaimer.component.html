<h2 mat-dialog-title class="dialog-title">
    <mat-icon aria-hidden="true">policy</mat-icon>
    {{ 'common.legal.disclaimer.title' | transloco }}
</h2>

<mat-dialog-actions class="lang-actions sticky-actions" align="start">
    <button mat-stroked-button [color]="lang() === 'de' ? 'primary' : undefined" (click)="setLanguage('de')"
        [disabled]="loading()" [class.active]="lang() === 'de'">{{ 'common.legal.language.de' | transloco }}</button>
    <button mat-stroked-button [color]="lang() === 'en' ? 'primary' : undefined" (click)="setLanguage('en')"
        [disabled]="loading()" [class.active]="lang() === 'en'">{{ 'common.legal.language.en' | transloco }}</button>
</mat-dialog-actions>

<mat-dialog-content class="content">
    @if (loading()) {
    <mat-progress-bar mode="indeterminate"></mat-progress-bar>
    <p class="muted">{{ 'common.legal.disclaimer.loading' | transloco }}</p>
    }

    @if (error()) {
    <div class="error" role="alert">
        <p>{{ 'common.legal.disclaimer.loadFailed' | transloco }}</p>
        <button mat-stroked-button (click)="reload()">{{ 'common.actions.retry' | transloco }}</button>
    </div>
    }

    @if (!loading() && !error()) {
    <pre class="disclaimer-text" [textContent]="text()"
        [attr.aria-label]="'common.legal.disclaimer.ariaLabel' | transloco"></pre>
    }
</mat-dialog-content>

<mat-dialog-actions class="consent sticky-actions" align="start">
    <mat-slide-toggle [checked]="accepted" [disabled]="loading() || error()" (change)="onToggle($event.checked)"
        [attr.aria-label]="'common.legal.disclaimer.acceptAria' | transloco">
        {{ 'common.legal.disclaimer.acceptText' | transloco }}
    </mat-slide-toggle>
</mat-dialog-actions>

<mat-dialog-actions class="actions sticky-actions" align="end">
    <button color="primary" (click)="close()" mat-icon-button [attr.aria-label]="'common.actions.close' | transloco" class="action-close"><mat-icon>close</mat-icon></button>
    <button mat-icon-button type="button" (click)="help.open('legalDisclaimer')"
        [attr.aria-label]="'common.actions.help' | transloco">
        <mat-icon>help</mat-icon>
    </button>
    <button (click)="openInNewTab()" [disabled]="loading() || error()" mat-icon-button [attr.aria-label]="'common.actions.openInNewTab' | transloco"><mat-icon>open_in_new</mat-icon></button>
    <button (click)="download()" [disabled]="loading() || error()" mat-icon-button [attr.aria-label]="'common.actions.download' | transloco"><mat-icon>download</mat-icon></button>
</mat-dialog-actions>
