<h2 mat-dialog-title class="dialog-title">
    <mat-icon class="dialog-title__icon" aria-hidden="true">image</mat-icon>
    <span class="dialog-title__text">{{ 'common.tiles.images.title' | transloco }}</span>
</h2>

<mat-dialog-content class="image-dialog-content">
    <div class="image-scroll">
        @if (!hasNotes()) {
        <div class="empty-state">
            <p class="empty-text">{{ 'common.tiles.images.empty' | transloco }}</p>
        </div>
        } @else {
        <div class="content">
            @for (image of sortedImages(); track image.id) {
            <mat-card class="item" appMasonryItem>
                <mat-card-content>
                    <div class="message-content">
                        @if (getImageUrl(image.id) === 'NOT_FOUND') {
                        <div class="missing">
                            <mat-icon aria-hidden="true">broken_image</mat-icon>
                            <div>{{ 'common.images.notFound' | transloco }}</div>
                        </div>
                        } @else {
                        <img [src]="getImageUrl(image.id)" [alt]="image.fileName" class="image-preview" />
                        }
                    </div>
                </mat-card-content>
                <mat-card-actions class="buttonbar">
                    @if (userService.isReady()) {
                    <button mat-mini-fab color="secondary" [attr.aria-label]="'common.images.deleteAria' | transloco"
                        (click)="deleteImage(image)">
                        <mat-icon>delete_forever</mat-icon>
                    </button>
                    <button mat-mini-fab color="secondary" [attr.aria-label]="'common.images.flyToAria' | transloco"
                        (click)="flyTo(image)">
                        <mat-icon>place</mat-icon>
                    </button>
                    <button mat-mini-fab color="secondary" [attr.aria-label]="'common.images.navigateAria' | transloco"
                        (click)="navigateToNoteLocation(image)">
                        <mat-icon>assistant_direction</mat-icon>
                    </button>
                    }
                </mat-card-actions>
            </mat-card>
            }
        </div>
        }
    </div>
</mat-dialog-content>

<mat-dialog-actions class="sticky-actions" align="end">
    <button mat-icon-button class="action-close" (click)="goBack()"
        [attr.aria-label]="'common.actions.close' | transloco">
        <mat-icon>close</mat-icon>
    </button>
    <button mat-icon-button color="primary" [attr.aria-label]="'common.images.addAria' | transloco"
        (click)="!userService.isReady() ? userService.login(openAddImageDialog.bind(this)) : openAddImageDialog()">
        <mat-icon>image_search</mat-icon>
    </button>
</mat-dialog-actions>
