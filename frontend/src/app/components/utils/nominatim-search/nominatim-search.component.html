<div class="searchTerm-container">
    <input #searchInput type="search" enterkeyhint="search" [formControl]="searchTerm" (keyup.enter)="search()"
        [placeholder]="'common.location.searchPlaceholder' | transloco">

    <select [(ngModel)]="selectedRadius" (change)="onSelectChange($event)">
        @for (r of radiusOptions; track r.value) {
        <option [value]="r.value">
            {{ r.labelKey | transloco:r.params }}
        </option>
        }
    </select>

    <button (click)="search()">
        <mat-icon>search</mat-icon>
    </button>
</div>

<mat-dialog-content>
    <div class="content">
        @for (place of nominatimPlaces; track place.place_id) {
        <mat-card class="item">
            <div class="avatar-box">
                <mat-icon>{{ getIconForPlace(place) || 'location' }}</mat-icon>
                @if (place.name) {
                <span class="name">{{ place.name }}</span>
                }
            </div>

            <mat-card-content>
                <div class="tile-value address-text">
                    {{ getFormattedAddress(place) }}
                </div>

                @if (place.distance !== undefined) {
                <div class="tile-severity">
                    {{ 'common.location.distanceLabel' | transloco }}: {{ formatDistance(place.distance) }}
                </div>
                }
            </mat-card-content>

            <mat-card-actions class="buttonbar">
                @if (!userService.isReady() || userService.hasJwt()) {
                <button [attr.aria-hidden]="false" mat-mini-fab color="secondary"
                    [attr.aria-label]="'common.location.addPlaceAria' | transloco"
                    (click)="!userService.isReady() ? loginAndAddToMyPlaces(place) : addToMyPlaces(place)">
                    <mat-icon>add_location</mat-icon>
                </button>
                }

                <button [attr.aria-hidden]="false" mat-mini-fab color="secondary"
                    [attr.aria-label]="'common.location.flyToPlaceAria' | transloco"
                    (click)="flyTo(place)">
                    <mat-icon>place</mat-icon>
                </button>

                <button [attr.aria-hidden]="false" mat-mini-fab color="secondary"
                    [attr.aria-label]="'common.location.navigateToPlaceAria' | transloco"
                    (click)="nominatimService.navigateToNominatimPlace(place)">
                    <mat-icon>assistant_direction</mat-icon>
                </button>
            </mat-card-actions>
        </mat-card>
        }
    </div>
</mat-dialog-content>
