<mat-dialog-content #dialogContent>
    @if (airQuality) {
    @if (locationName$ | async) {
    <div class="header-title">
        {{ getCategoryLabel(selectedCategory) }} for {{ locationName }}
    </div>
    } @else {
    <div class="header-title">
        {{ getCategoryLabel(selectedCategory) }}
    </div>
    }

    <div class="day-switch">
        @for (dayLabel of dayLabels; track dayLabel) {
        <button mat-raised-button [color]="$index === selectedDayIndex ? 'primary' : 'secondary'"
            (click)="onDayChange($index)">
            {{ dayLabel }}
        </button>
        }
    </div>

    @if (!selectedTile) {
    <div class="tile-grid">
        @for (tile of tileValues; track tile.label) {
        <div class="tile" [style.color]="tile.color" (click)="onTileClick(tile)">
            <div class="tile-title">{{ tile.label }}</div>
            <div class="tile-icon-wrapper">
                <mat-icon class="tile-icon">{{ tile.icon }}</mat-icon>
            </div>
            <div class="tile-value">
                {{ tile.value }} {{ tile.unit }}
            </div>
            @if (tile.levelText) {
            <div class="tile-level">{{ tile.levelText }}</div>
            }
            @if (tile.minMax) {
            <div class="tile-minmax">{{ tile.minMax.min }} - {{ tile.minMax.max }}</div>
            }
        </div>
        }
    </div>
    } @else {
    <app-air-quality-detail [tile]="selectedTile" [selectedDayIndex]="selectedDayIndex" [selectedHour]="selectedHour">
    </app-air-quality-detail>
    }

    <div class="hour-slider">
        <mat-slider min="0" max="23" step="1" thumbLabel tickInterval="1" (input)="onHourChange()">
            <input matSliderThumb [(ngModel)]="selectedHour">
        </mat-slider>
        @if (!selectedTile) {
        <div class="selected-hour">Selected hour: {{ selectedHour }}:00</div>
        }
    </div>

    @if (selectedTile) {
    <div class="tile-nav-buttons">
        <button mat-mini-fab color="accent" (click)="selectPreviousTile()" [disabled]="tileIndex === 0">
            <mat-icon>chevron_left</mat-icon>
        </button>
        <button mat-mini-fab color="primary" (click)="selectedTile = null">
            <mat-icon>close</mat-icon>
        </button>
        <button mat-mini-fab color="accent" (click)="selectNextTile()" [disabled]="tileIndex === allKeys.length - 1">
            <mat-icon>chevron_right</mat-icon>
        </button>
    </div>
    }

    @if (!selectedTile) {
    <div class="category-switch">
        @for (category of categoryModes; track category) {
        <button mat-mini-fab [color]="selectedCategory === category ? 'primary' : 'secondary'"
            (click)="onCategoryToggle(category)" [matTooltip]="getCategoryLabel(category)">
            <mat-icon>{{ getCategoryIcon(category) }}</mat-icon>
        </button>
        }
    </div>
    }
    }

    <div class="data-source">
        Air quality data provided by
        <a href="https://open-meteo.com/" target="_blank" rel="noopener">open-meteo.com</a>.
    </div>
</mat-dialog-content>